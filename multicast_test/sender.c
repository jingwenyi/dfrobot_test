#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <time.h>
#include <string.h>
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#define HELLO_PORT 5353
#define HELLO_GROUP "224.0.0.251"



unsigned char msg1[]={
0x00, 0x00, 0x84, 0x00, 0x00, 0x00,
0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x08, 0x5f, 0x61, 0x72, 0x64, 0x75, 0x69, 0x6e, 0x6f, 0x04,
0x5f, 0x74, 0x63, 0x70, 0x05, 0x6c, 0x6f, 0x63, 0x61, 0x6c, 0x00, 0x00, 0x0c, 0x00, 0x01, 0x00,
0x00, 0x11, 0x94, 0x00, 0x09, 0x06, 0x6c, 0x69, 0x6e, 0x69, 0x6e, 0x6f, 0xc0, 0x0c, 0xc0, 0x2b,
0x00, 0x10, 0x80, 0x01, 0x00, 0x00, 0x11, 0x94, 0x00, 0x1d, 0x09, 0x62, 0x6f, 0x61, 0x72, 0x64,
0x3d, 0x79, 0x75, 0x6e, 0x12, 0x64, 0x69, 0x73, 0x74, 0x72, 0x6f, 0x5f, 0x76, 0x65, 0x72, 0x73,
0x69, 0x6f, 0x6e, 0x3d, 0x30, 0x2e, 0x31, 0xc0, 0x2b, 0x00, 0x21, 0x80, 0x01, 0x00, 0x00, 0x00,
0x78, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x50, 0x06, 0x6c, 0x69, 0x6e, 0x69, 0x6e, 0x6f,
0xc0, 0x1a, 0xc0, 0x6f, 0x00, 0x01, 0x80, 0x01, 0x00, 0x00, 0x00, 0x78, 0x00, 0x04, 0xc0, 0xa8,
0x01, 0x02
};






int main(int argc, char *argv[])
{
	struct sockaddr_in addr;
	int fd, cnt;
	struct ip_mreq mreq;
	char *message="Hello, World!";
	/* create what looks like an ordinary UDP socket */
	if ((fd=socket(AF_INET,SOCK_DGRAM,0)) < 0) 
	{
		perror("socket");
		exit(1);
	}
	/* set up destination address */
	memset(&addr,0,sizeof(addr));
	addr.sin_family=AF_INET;
	addr.sin_addr.s_addr=inet_addr(HELLO_GROUP);
	addr.sin_port=htons(HELLO_PORT);
	/* now just sendto() our destination! */
	while (1)
	{
		//if (sendto(fd,message, strlen(message), 0, (struct sockaddr *) &addr, sizeof(addr)) < 0) 
		//{
		//	perror("sendto");
		//	exit(1);
		//}
		
                if (sendto(fd,msg1, sizeof(msg1), 0, (struct sockaddr *) &addr, sizeof(addr)) < 0)
                {
                        perror("sendto");
                        exit(1);
                }

                //if (sendto(fd,msg2, sizeof(msg2), 0, (struct sockaddr *) &addr, sizeof(addr)) < 0)
                //{
                //        perror("sendto");
                //        exit(1);
                //}
	}
	return 0;
}




